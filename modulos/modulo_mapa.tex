\section{Módulo Mapa}

Description %%TODO

\begin{Interfaz}
	\textbf{se explica con}: \tadNombre{mapa}.

	\textbf{géneros}: \TipoVariable{map}.

	\TituloDis{Operaciones básicas de Mapa}

	\InterfazFuncion{CrearMapa}{}{map}
	[]
	{$res \igobs crearMapa$}
	[$O(1))$]
	[Crea un mapa vacío]
	[]

	\InterfazFuncion{AgregarCoor}{\In{c}{coor}, \Inout{m}{map}}{map}
	[$m \igobs m_0$]
	{$m \igobs agregarCoor(c,m)$}
	[]
	[Agrega la coordenada al mapa ]
	[]

	\InterfazFuncion{Coordenadas}{\In{m}{map}}{conj(coor)}
	[]
	{$res \igobs coordenadas(m)$}
	[]
	[Devuelve las coordenadas de un mapa]
	[]

	\InterfazFuncion{PosExistente}{\In{c}{coor}, \In{m}{map}}{bool}
	[]
	{$res \igobs posExistente(m)$}
	[]
	[Verifica si existe la coordenada ]
	[]

	\InterfazFuncion{HayCamino}{\In{c1}{coor}, \In{c2}{coor}, \In{m}{map}}{bool}
	[$c1 \in$ coordenadas(m) $\land$ $c2 \in$ coordenadas(m)]
	{$res \igobs hayCamino(m)$}
	[]
	[]
	[]

	\InterfazFuncion{ExisteCamino}{\In{c1}{coor}, \In{c2}{coor}, \In{m}{map}}{bool}
	[$c1 \in$ coordenadas(m) $\land$ $c2 \in$ coordenadas(m)]
	{$res \igobs existeCamino(m)$}
	[]
	[]
	[]
\end{Interfaz}


\begin{Representacion}
	\TituloDis{Representación de Mapa}

	\begin{Estructura}{ Mapa }[eMap]
		\begin{Tupla}[eMap]
			\tupItem{alto}{nat}
			\tupItem{ancho}{nat}
			\tupItem{posValidas}{vector(vector(bool))}
		\end{Tupla}
	\end{Estructura}

	\TituloDis{Invariante de Representación}

	\Rep[eMap][e]{
		e.alto = long(posValidas(e.posValidas)) $\yluego$ \\
		($\exists i$: nat)(i $<$ e.alto $\implies$ long(e.posValidas[i]) = e.ancho) $\land$ \\
		($\forall i$: nat)(i $<$ e.alto $\implies$ long(e.posValidas[i]) $\leq$ e.ancho)
	}

	\TituloDis{Función de Abstracción}

	\Abs[eMap]{map}[e]{m}
	{
		($\exists c$: coor)(c $\in$ coordenadas(m) $\implies$ latitud(c) = e.alto) $\yluego$ \\
		($\exists c$: coor)(c $\in$ coordenadas(m) $\implies$ longitud(c) = e.ancho) $\yluego$ 
		($\forall c$: coor)( \\
			(c $\in$ coordenadas(m) $\implies$ 
				latitud(c) $\leq$ e.alto $\yluego$
				longitud(c) $\leq$ long(e.posValidas[latitud(c)]) $\yluego$ 
				e.posValidas[latitud(c)][longitud(c)]) $\land$ \\
			(c $\not\in$ coordenadas(m) $\land$ latitud(c) $\leq$ e.alto $\land$ longitud(c) $\leq$ long(e.posValidas[latitud(c)]) $\implies$ $\neg$ e.posValidas[latitud(c)][longitud(c)]))
	}
\end{Representacion}

\begin{Algoritmos}
	\TituloDis{Algorítmos de Mapa}

	\begin{algorithm}[H]
		\NoCaptionOfAlgo
		\caption{\algoritmo{iCrearMapa}{}{map}}
		res $\leftarrow$ Vacia()\;
	\end{algorithm}

	\begin{algorithm}[H]
		\NoCaptionOfAlgo
		\caption{\algoritmo{iAgregarCoor}{\In{c}{coor}, \Inout{m}{map}}{}}
	\end{algorithm}

	\begin{algorithm}[H]
		\NoCaptionOfAlgo
		\caption{\algoritmo{iCoordenadas}{\In{m}{map}}{}}
	\end{algorithm}

	\begin{algorithm}[H]
		\NoCaptionOfAlgo
		\caption{\algoritmo{iPosExistente}{\In{c}{coor}, \In{m}{map}}{}}
	\end{algorithm}

	\begin{algorithm}[H]
		\NoCaptionOfAlgo
		\caption{\algoritmo{iHayCamino}{\In{c1}{coor}, \In{c2}{coor}, \In{m}{map}}{}}
	\end{algorithm}

	\begin{algorithm}[H]
		\NoCaptionOfAlgo
		\caption{\algoritmo{iExisteCamino}{\In{c1}{coor}, \In{c2}{coor}, \In{m}{map}}{}}
	\end{algorithm}

\end{Algoritmos}